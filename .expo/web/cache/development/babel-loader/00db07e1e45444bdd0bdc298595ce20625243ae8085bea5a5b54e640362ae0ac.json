{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useEffect, useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport { Card } from 'react-native-elements';\nimport { getDatabase, ref, query, orderByChild, equalTo, limitToLast, onValue } from 'firebase/database';\nimport { useAuthState } from 'react-firebase-hooks/auth';\nimport { useList } from 'react-firebase-hooks/database';\nimport { initializeApp } from 'firebase/app';\nimport { getAuth } from \"firebase/auth\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar firebaseConfig = {\n  apiKey: \"AIzaSyDBjUEw_DQNMQsZJWfTtLL0PQJoH-xF0kk\",\n  authDomain: \"sta-cs5041.firebaseapp.com\",\n  databaseURL: \"https://sta-cs5041-p4.firebaseio.com\",\n  projectId: \"sta-cs5041\",\n  storageBucket: \"sta-cs5041.appspot.com\",\n  messagingSenderId: \"639987847762\",\n  appId: \"1:639987847762:web:c5a35616a1aa1cf243458b\"\n};\nvar firebaseToken = \"9dd8d43a-01db-4286-b0e8-371d24237380\";\nvar firebaseApp = initializeApp(firebaseConfig);\nvar auth = getAuth(firebaseApp);\nvar database = getDatabase(firebaseApp);\nvar functions = getFunctions(firebaseApp);\nvar MuseumStoryCards = function MuseumStoryCards() {\n  var _useAuthState = useAuthState(auth),\n    _useAuthState2 = _slicedToArray(_useAuthState, 3),\n    user = _useAuthState2[0],\n    authLoading = _useAuthState2[1],\n    authError = _useAuthState2[2];\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    stories = _useState2[0],\n    setStories = _useState2[1];\n  useEffect(function () {\n    if (user) {\n      var db = getDatabase();\n      var aliasQuery = query(ref(db, 'data'), orderByChild('groupId'), equalTo(30));\n      var locationQuery = query(ref(db, 'data'), orderByChild('groupId'), equalTo(31));\n      var timeQuery = query(ref(db, 'data'), orderByChild('groupId'), equalTo(32));\n      var recipientQuery = query(ref(db, 'data'), orderByChild('groupId'), equalTo(33));\n      var storyQuery = query(ref(db, 'data'), orderByChild('groupId'), equalTo(34));\n      var _useList = useList(aliasQuery),\n        _useList2 = _slicedToArray(_useList, 1),\n        aliasSnapshot = _useList2[0];\n      var _useList3 = useList(locationQuery),\n        _useList4 = _slicedToArray(_useList3, 1),\n        locationSnapshot = _useList4[0];\n      var _useList5 = useList(timeQuery),\n        _useList6 = _slicedToArray(_useList5, 1),\n        timeSnapshot = _useList6[0];\n      var _useList7 = useList(recipientQuery),\n        _useList8 = _slicedToArray(_useList7, 1),\n        recipientSnapshot = _useList8[0];\n      var _useList9 = useList(storyQuery),\n        _useList10 = _slicedToArray(_useList9, 1),\n        storySnapshot = _useList10[0];\n      var formattedStories = formatStories(aliasSnapshot, locationSnapshot, timeSnapshot, recipientSnapshot, storySnapshot);\n      setStories(formattedStories);\n    }\n  }, [user]);\n  var formatStories = function formatStories(alias, location, time, recipient, story) {\n    var formattedStories = [];\n    if (!alias || !location || !time || !recipient || !story) return formattedStories;\n    for (var i = 0; i < alias.length; i++) {\n      formattedStories.push({\n        alias: alias[i].val().string,\n        location: location[i].val().string,\n        time: time[i].val().string,\n        recipient: recipient[i].val().string,\n        story: story[i].val().string\n      });\n    }\n    return formattedStories;\n  };\n  return _jsx(ScrollView, {\n    children: stories.map(function (story, index) {\n      return _jsxs(Card, {\n        children: [_jsx(Card.Title, {\n          children: story.alias\n        }), _jsx(Card.Divider, {}), _jsxs(View, {\n          children: [_jsxs(Text, {\n            style: styles.text,\n            children: [\"Location: \", story.location]\n          }), _jsxs(Text, {\n            style: styles.text,\n            children: [\"Time: \", story.time]\n          }), _jsxs(Text, {\n            style: styles.text,\n            children: [\"Recipient: \", story.recipient]\n          }), _jsxs(Text, {\n            style: styles.text,\n            children: [\"Story: \", story.story]\n          })]\n        })]\n      }, index);\n    })\n  });\n};\nvar styles = StyleSheet.create({\n  text: {\n    marginBottom: 10\n  }\n});\nexport default MuseumStoryCards;","map":{"version":3,"names":["React","useEffect","useState","View","Text","StyleSheet","ScrollView","Card","getDatabase","ref","query","orderByChild","equalTo","limitToLast","onValue","useAuthState","useList","initializeApp","getAuth","jsx","_jsx","jsxs","_jsxs","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","firebaseToken","firebaseApp","auth","database","functions","getFunctions","MuseumStoryCards","_useAuthState","_useAuthState2","_slicedToArray","user","authLoading","authError","_useState","_useState2","stories","setStories","db","aliasQuery","locationQuery","timeQuery","recipientQuery","storyQuery","_useList","_useList2","aliasSnapshot","_useList3","_useList4","locationSnapshot","_useList5","_useList6","timeSnapshot","_useList7","_useList8","recipientSnapshot","_useList9","_useList10","storySnapshot","formattedStories","formatStories","alias","location","time","recipient","story","i","length","push","val","string","children","map","index","Title","Divider","style","styles","text","create","marginBottom"],"sources":["/cs/home/sz78/Documents/P4_expo/MuseumStoryCards.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { View, Text, StyleSheet, ScrollView } from 'react-native';\nimport { Card } from 'react-native-elements';\nimport { getDatabase, ref, query, orderByChild, equalTo, limitToLast, onValue } from 'firebase/database';\nimport { useAuthState } from 'react-firebase-hooks/auth';\nimport { useList } from 'react-firebase-hooks/database';\nimport { initializeApp } from 'firebase/app';\nimport { getAuth } from \"firebase/auth\";\n\n\nconst firebaseConfig = {\n    apiKey: \"AIzaSyDBjUEw_DQNMQsZJWfTtLL0PQJoH-xF0kk\",\n    authDomain: \"sta-cs5041.firebaseapp.com\",\n    databaseURL: \"https://sta-cs5041-p4.firebaseio.com\",\n    projectId: \"sta-cs5041\",\n    storageBucket: \"sta-cs5041.appspot.com\",\n    messagingSenderId: \"639987847762\",\n    appId: \"1:639987847762:web:c5a35616a1aa1cf243458b\"\n  };\n  \n  const firebaseToken = \"9dd8d43a-01db-4286-b0e8-371d24237380\";\n\n  const firebaseApp = initializeApp(firebaseConfig);\n  const auth = getAuth(firebaseApp);\n  const database = getDatabase(firebaseApp);\n  const functions = getFunctions(firebaseApp);\n\nconst MuseumStoryCards = () => {\n  const [user, authLoading, authError] = useAuthState(auth);\n  const [stories, setStories] = useState([]);\n\n  useEffect(() => {\n    if (user) {\n      const db = getDatabase();\n      const aliasQuery = query(ref(db, 'data'), orderByChild('groupId'), equalTo(30));\n      const locationQuery = query(ref(db, 'data'), orderByChild('groupId'), equalTo(31));\n      const timeQuery = query(ref(db, 'data'), orderByChild('groupId'), equalTo(32));\n      const recipientQuery = query(ref(db, 'data'), orderByChild('groupId'), equalTo(33));\n      const storyQuery = query(ref(db, 'data'), orderByChild('groupId'), equalTo(34));\n\n      const [aliasSnapshot] = useList(aliasQuery);\n      const [locationSnapshot] = useList(locationQuery);\n      const [timeSnapshot] = useList(timeQuery);\n      const [recipientSnapshot] = useList(recipientQuery);\n      const [storySnapshot] = useList(storyQuery);\n\n      const formattedStories = formatStories(\n        aliasSnapshot,\n        locationSnapshot,\n        timeSnapshot,\n        recipientSnapshot,\n        storySnapshot\n      );\n      setStories(formattedStories);\n    }\n  }, [user]);\n\n  const formatStories = (alias, location, time, recipient, story) => {\n    const formattedStories = [];\n    if (!alias || !location || !time || !recipient || !story) return formattedStories;\n\n    for (let i = 0; i < alias.length; i++) {\n      formattedStories.push({\n        alias: alias[i].val().string,\n        location: location[i].val().string,\n        time: time[i].val().string,\n        recipient: recipient[i].val().string,\n        story: story[i].val().string,\n      });\n    }\n\n    return formattedStories;\n  };\n\n  return (\n    <ScrollView>\n      {stories.map((story, index) => (\n        <Card key={index}>\n          <Card.Title>{story.alias}</Card.Title>\n          <Card.Divider />\n          <View>\n            <Text style={styles.text}>Location: {story.location}</Text>\n            <Text style={styles.text}>Time: {story.time}</Text>\n            <Text style={styles.text}>Recipient: {story.recipient}</Text>\n            <Text style={styles.text}>Story: {story.story}</Text>\n          </View>\n        </Card>\n      ))}\n    </ScrollView>\n  );\n};\n\nconst styles = StyleSheet.create({\n  text: {\n    marginBottom: 10,\n  },\n});\n\nexport default MuseumStoryCards;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}