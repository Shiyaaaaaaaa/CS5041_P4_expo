{"ast":null,"code":"import { defineAnimation } from \"./util\";\nexport var withRepeat = function () {\n  var _f = function _f(_nextAnimation) {\n    var numberOfReps = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 2;\n    var reverse = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    var callback = arguments.length > 3 ? arguments[3] : undefined;\n    return defineAnimation(_nextAnimation, function () {\n      var _f = function _f() {\n        var nextAnimation = typeof _nextAnimation === 'function' ? _nextAnimation() : _nextAnimation;\n        function repeat(animation, now) {\n          var finished = nextAnimation.onFrame(nextAnimation, now);\n          animation.current = nextAnimation.current;\n          if (finished) {\n            animation.reps += 1;\n            if (nextAnimation.callback) {\n              nextAnimation.callback(true, animation.current);\n            }\n            if (numberOfReps > 0 && animation.reps >= numberOfReps) {\n              return true;\n            }\n            var startValue = reverse ? nextAnimation.current : animation.startValue;\n            if (reverse) {\n              nextAnimation.toValue = animation.startValue;\n              animation.startValue = startValue;\n            }\n            nextAnimation.onStart(nextAnimation, startValue, now, nextAnimation.previousAnimation);\n            return false;\n          }\n          return false;\n        }\n        var repCallback = function repCallback(finished) {\n          if (callback) {\n            callback(finished);\n          }\n          if (!finished && nextAnimation.callback) {\n            nextAnimation.callback(false);\n          }\n        };\n        function onStart(animation, value, now, previousAnimation) {\n          animation.startValue = value;\n          animation.reps = 0;\n          nextAnimation.onStart(nextAnimation, value, now, previousAnimation);\n        }\n        return {\n          isHigherOrder: true,\n          onFrame: repeat,\n          onStart: onStart,\n          reps: 0,\n          current: nextAnimation.current,\n          callback: repCallback,\n          startValue: 0\n        };\n      };\n      _f._closure = {\n        _nextAnimation: _nextAnimation,\n        numberOfReps: numberOfReps,\n        reverse: reverse,\n        callback: callback\n      };\n      _f.asString = \"function _f(){const{_nextAnimation,numberOfReps,reverse,callback}=jsThis._closure;{const nextAnimation=typeof _nextAnimation==='function'?_nextAnimation():_nextAnimation;function repeat(animation,now){const finished=nextAnimation.onFrame(nextAnimation,now);animation.current=nextAnimation.current;if(finished){animation.reps+=1;if(nextAnimation.callback){nextAnimation.callback(true,animation.current);}if(numberOfReps>0&&animation.reps>=numberOfReps){return true;}const startValue=reverse?nextAnimation.current:animation.startValue;if(reverse){nextAnimation.toValue=animation.startValue;animation.startValue=startValue;}nextAnimation.onStart(nextAnimation,startValue,now,nextAnimation.previousAnimation);return false;}return false;}const repCallback=function(finished){if(callback){callback(finished);}if(!finished&&nextAnimation.callback){nextAnimation.callback(false);}};function onStart(animation,value,now,previousAnimation){animation.startValue=value;animation.reps=0;nextAnimation.onStart(nextAnimation,value,now,previousAnimation);}return{isHigherOrder:true,onFrame:repeat,onStart:onStart,reps:0,current:nextAnimation.current,callback:repCallback,startValue:0};}}\";\n      _f.__workletHash = 7048649597913;\n      _f.__location = \"/cs/home/sz78/Documents/P4_expo/node_modules/react-native-reanimated/lib/module/reanimated2/animation/repeat.js (8:41)\";\n      return _f;\n    }());\n  };\n  _f._closure = {\n    defineAnimation: defineAnimation\n  };\n  _f.asString = \"function withRepeat(_nextAnimation){const{defineAnimation}=jsThis._closure;{let numberOfReps=arguments.length>1&&arguments[1]!==undefined?arguments[1]:2;let reverse=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;let callback=arguments.length>3?arguments[3]:undefined;return defineAnimation(_nextAnimation,function(){'worklet';const nextAnimation=typeof _nextAnimation==='function'?_nextAnimation():_nextAnimation;function repeat(animation,now){const finished=nextAnimation.onFrame(nextAnimation,now);animation.current=nextAnimation.current;if(finished){animation.reps+=1;if(nextAnimation.callback){nextAnimation.callback(true,animation.current);}if(numberOfReps>0&&animation.reps>=numberOfReps){return true;}const startValue=reverse?nextAnimation.current:animation.startValue;if(reverse){nextAnimation.toValue=animation.startValue;animation.startValue=startValue;}nextAnimation.onStart(nextAnimation,startValue,now,nextAnimation.previousAnimation);return false;}return false;}const repCallback=function(finished){if(callback){callback(finished);}if(!finished&&nextAnimation.callback){nextAnimation.callback(false);}};function onStart(animation,value,now,previousAnimation){animation.startValue=value;animation.reps=0;nextAnimation.onStart(nextAnimation,value,now,previousAnimation);}return{isHigherOrder:true,onFrame:repeat,onStart:onStart,reps:0,current:nextAnimation.current,callback:repCallback,startValue:0};});}}\";\n  _f.__workletHash = 17540917340267;\n  _f.__location = \"/cs/home/sz78/Documents/P4_expo/node_modules/react-native-reanimated/lib/module/reanimated2/animation/repeat.js (2:7)\";\n  return _f;\n}();","map":{"version":3,"names":["defineAnimation","withRepeat","_f","_nextAnimation","numberOfReps","arguments","length","undefined","reverse","callback","nextAnimation","repeat","animation","now","finished","onFrame","current","reps","startValue","toValue","onStart","previousAnimation","repCallback","value","isHigherOrder","_closure","asString","__workletHash","__location"],"sources":["/cs/home/sz78/Documents/P4_expo/node_modules/react-native-reanimated/lib/module/reanimated2/animation/repeat.ts"],"sourcesContent":["import { defineAnimation } from './util';\nimport {\n  Animation,\n  AnimationCallback,\n  AnimatableValue,\n  Timestamp,\n} from '../commonTypes';\nimport { NextAnimation, RepeatAnimation } from './commonTypes';\n\nexport interface InnerRepeatAnimation\n  extends Omit<RepeatAnimation, 'toValue' | 'startValue'> {\n  toValue: number;\n  startValue: number;\n}\n\nexport function withRepeat(\n  _nextAnimation: NextAnimation<RepeatAnimation>,\n  numberOfReps = 2,\n  reverse = false,\n  callback?: AnimationCallback\n): Animation<RepeatAnimation> {\n  'worklet';\n\n  return defineAnimation<RepeatAnimation>(_nextAnimation, () => {\n    'worklet';\n\n    const nextAnimation: RepeatAnimation =\n      typeof _nextAnimation === 'function' ? _nextAnimation() : _nextAnimation;\n\n    function repeat(animation: InnerRepeatAnimation, now: Timestamp): boolean {\n      const finished = nextAnimation.onFrame(nextAnimation, now);\n      animation.current = nextAnimation.current;\n      if (finished) {\n        animation.reps += 1;\n        // call inner animation's callback on every repetition\n        // as the second argument the animation's current value is passed\n        if (nextAnimation.callback) {\n          nextAnimation.callback(true /* finished */, animation.current);\n        }\n        if (numberOfReps > 0 && animation.reps >= numberOfReps) {\n          return true;\n        }\n\n        const startValue = reverse\n          ? (nextAnimation.current as number)\n          : animation.startValue;\n        if (reverse) {\n          nextAnimation.toValue = animation.startValue;\n          animation.startValue = startValue;\n        }\n        nextAnimation.onStart(\n          nextAnimation,\n          startValue,\n          now,\n          nextAnimation.previousAnimation as RepeatAnimation\n        );\n        return false;\n      }\n      return false;\n    }\n\n    const repCallback = (finished: boolean): void => {\n      if (callback) {\n        callback(finished);\n      }\n      // when cancelled call inner animation's callback\n      if (!finished && nextAnimation.callback) {\n        nextAnimation.callback(false /* finished */);\n      }\n    };\n\n    function onStart(\n      animation: RepeatAnimation,\n      value: AnimatableValue,\n      now: Timestamp,\n      previousAnimation: RepeatAnimation\n    ): void {\n      animation.startValue = value;\n      animation.reps = 0;\n      nextAnimation.onStart(nextAnimation, value, now, previousAnimation);\n    }\n\n    return {\n      isHigherOrder: true,\n      onFrame: repeat,\n      onStart,\n      reps: 0,\n      current: nextAnimation.current,\n      callback: repCallback,\n      startValue: 0,\n    } as RepeatAnimation;\n  });\n}\n"],"mappings":"AAAA,SAASA,eAAe;AAexB,WAAgBC,UAAU;EAAA,IAAAC,EAAA,YAAAA,GACxBC,cAA8C,EAIlB;IAClB,IAJVC,YAAY,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,CAAC;IAAA,IAChBG,OAAO,GAAAH,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,KAAK;IAAA,IACfI,QAA4B,GAAAJ,SAAA,CAAAC,MAAA,OAAAD,SAAA,MAAAE,SAAA;IAI5B,OAAOP,eAAe,CAAkBG,cAAc;MAAA,IAAAD,EAAA,YAAAA,GAAA,EAAQ;QAG5D,IAAMQ,aAA8B,GAClC,OAAOP,cAAc,KAAK,UAAU,GAAGA,cAAc,EAAE,GAAGA,cAAc;QAE1E,SAASQ,MAAMA,CAACC,SAA+B,EAAEC,GAAc,EAAW;UACxE,IAAMC,QAAQ,GAAGJ,aAAa,CAACK,OAAO,CAACL,aAAa,EAAEG,GAAG,CAAC;UAC1DD,SAAS,CAACI,OAAO,GAAGN,aAAa,CAACM,OAAO;UACzC,IAAIF,QAAQ,EAAE;YACZF,SAAS,CAACK,IAAI,IAAI,CAAC;YAGnB,IAAIP,aAAa,CAACD,QAAQ,EAAE;cAC1BC,aAAa,CAACD,QAAQ,CAAC,IAAI,EAAiBG,SAAS,CAACI,OAAO,CAAC;YAChE;YACA,IAAIZ,YAAY,GAAG,CAAC,IAAIQ,SAAS,CAACK,IAAI,IAAIb,YAAY,EAAE;cACtD,OAAO,IAAI;YACb;YAEA,IAAMc,UAAU,GAAGV,OAAO,GACrBE,aAAa,CAACM,OAAO,GACtBJ,SAAS,CAACM,UAAU;YACxB,IAAIV,OAAO,EAAE;cACXE,aAAa,CAACS,OAAO,GAAGP,SAAS,CAACM,UAAU;cAC5CN,SAAS,CAACM,UAAU,GAAGA,UAAU;YACnC;YACAR,aAAa,CAACU,OAAO,CACnBV,aAAa,EACbQ,UAAU,EACVL,GAAG,EACHH,aAAa,CAACW,iBAAiB,CAChC;YACD,OAAO,KAAK;UACd;UACA,OAAO,KAAK;QACd;QAEA,IAAMC,WAAW,GAAI,SAAfA,WAAWA,CAAIR,QAAiB,EAAW;UAC/C,IAAIL,QAAQ,EAAE;YACZA,QAAQ,CAACK,QAAQ,CAAC;UACpB;UAEA,IAAI,CAACA,QAAQ,IAAIJ,aAAa,CAACD,QAAQ,EAAE;YACvCC,aAAa,CAACD,QAAQ,CAAC,KAAM,CAAe;UAC9C;QACF,CAAC;QAED,SAASW,OAAOA,CACdR,SAA0B,EAC1BW,KAAsB,EACtBV,GAAc,EACdQ,iBAAkC,EAC5B;UACNT,SAAS,CAACM,UAAU,GAAGK,KAAK;UAC5BX,SAAS,CAACK,IAAI,GAAG,CAAC;UAClBP,aAAa,CAACU,OAAO,CAACV,aAAa,EAAEa,KAAK,EAAEV,GAAG,EAAEQ,iBAAiB,CAAC;QACrE;QAEA,OAAO;UACLG,aAAa,EAAE,IAAI;UACnBT,OAAO,EAAEJ,MAAM;UACfS,OAAO,EAAPA,OAAO;UACPH,IAAI,EAAE,CAAC;UACPD,OAAO,EAAEN,aAAa,CAACM,OAAO;UAC9BP,QAAQ,EAAEa,WAAW;UACrBJ,UAAU,EAAE;QACd,CAAC;MACH,CAAC;MAAAhB,EAAA,CAAAuB,QAAA;QAAAtB,cAAA,EAtEQA,cAAA;QAAAC,YAAA,EAUoCA,YAAA;QAAAI,OAAA,EAIvCA,OAAA;QAAAC,QAAA,E;MAcA;MAAAP,EAAA,CAAAwB,QAAA;MAAAxB,EAAA,CAAAyB,aAAA;MAAAzB,EAAA,CAAA0B,UAAA;MAAA,OAAA1B,EAAA;IAAA,GA0CL,CAAC;EACJ;EAAAA,EAAA,CAAAuB,QAAA;IAAAzB,eAAA,EA1EEA;EAAO;EAAAE,EAAA,CAAAwB,QAAA;EAAAxB,EAAA,CAAAyB,aAAA;EAAAzB,EAAA,CAAA0B,UAAA;EAAA,OAAA1B,EAAA;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}